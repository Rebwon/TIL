## test와 관련하여 정리.

### 테스트 메서드의 작성 방식

- 테스트 대상 메서드와 이름을 1:1로 일치
  - 장점: 테스트 메서드의 숫자가 적여져서 보기가 편하고, 대상이 되는 클래스의 메서드와 1:1로 연관지어
  생각할 수 있다.
  - 단점: 추가적인 테스트 케이스가 하나의 테스트 메서드 내에 전부 존재하게 만들 경우, 메서드 내의 초반 테스트 단정문이
  실패하면, 뒤쪽 테스트 케이스들은 실행되지 않는다. 이럴 경우 성공하는 케이스와 실패하는 케이스가 섞여서 구별하기 어렵다.
  
- 테스트 대상 메서드의 이름 뒤에 추가적인 정보를 기재
  - 장점: 더 다양한 케이스 별로 성공/실패를 알 수 있다. 케이스마다 독립적으로 수행할 수 있어 오류의 가능성이 좀 더 줄어든다.
  - 단점: 테스트 케이스만큼 메서드를 만들기 때문에 메서드 숫자가 많아진다. 테스트 메서드 이름을 짓는 데 상당한 요령이 필요하다. 케이스마다
  리소스 초기화(Setup) 작업이 필요하다.
  
- 테스트 시나리오에 집중
  - 장점: 테스트 케이스를 시나리오에 따라 체계적으로 작성할 수 있다. 테스트 클래스를 하나의 업무단위 테스트 단위처럼 문서화할 수 있다.
  - 단점: 테스트 대상 클래스의 단위 메서드 구현 시에 사용하기에는 다소 무리가 따른다.
  
### 테스트 케이스 작성

- 해피데이 시나리오 방식:
정상적인 흐름일 때 동작해야 하는 결과값을 선정해놓는 방식이다.
- 블루데이 시나리오 방식:
발생할 수 있는 예외나 에러 상황에 대한 결과값을 적은 방식이다.

무엇을 테스트 할 것인가? 에 대한 질문

- 결과가 옳은가?
- 모든 경계조건이 옳은가?
- 역(inverse)관계를 확인할 수 있는가?
- 다른 수단을 사용해서 결과를 교차확인할 수 있는가?
- 에러 조건을 강제로 만들어낼 수 있는가?
- 성능이 한도 내에 있는가?

### TDD의 한계

- 동시성 문제:
동시성이 걸려 있는 코드에 대한 테스트는 무결하게 유지하기 어렵다. 상식적으로 파악하기 어려운 불규칙한 문제가
적지 않게 발생하기 때문이다.
- 접근제한자(private/protected 메서드):
private으로 되어 있는 메서드는 일반적인 방법으로는 테스트가 불가능하다. private 메서드와 관련하여 테스트 메서드 필요성 자체에 대한
논의가 필요하다. 현재는 'public으로 되어 있는 메서드만 테스트해도 무방하다'라는 경향이 대세인 것으로 보인다. 왜냐하면 private 메서드는 public메서드들이
사용하는 메서드들이고, public메서드가 테스트 될때 private 메서드들도 함께 테스트가 이뤄진다고 보기 때문이다. 다만, 경우에 따라 우선은 모든 메서드를 public으로 만들어서 테스트가 끝난 다음,
차후에 판단하여 public을 private으로 바꾸는 식의 범위를 줄이는 형태로 접근하는 것도 한 가지 방법이다. 그럴 때에 기존에 생성항 테스트 케이스는 지우지 말고 주석 형태로
남겨놓을 것을 권장한다.
- 의존성 모듈 테스트(target A but A -> B):
테스트하려는 부분에 의존성이 있는 모듈을 사용하고 있는 경우의 테스트도 종종 문제가 된다. 즉, '테스트의 대상이 되는 A가 기타 메서드나 클래스를 참조하고 있을 경우, 그리고 해당
참조 부분에 대한 접근이 쉽지 않을 경우에 B는 어떻게 할 것인가?'라는 문제다. B가 아무런 문제 없이 확실한 모듈이라면 상관없는데, 그렇지 않다면 문제의 소지가 있는 부분이다.
이럴 때는, B를 둘러싼 일종의 프록시 클래스를 하나 만들어서 온전히 B부터 테스트하는 방식으로 접근하는 방식을 취하든가, 아니면 B를 신뢰한다는 가정하에서 A만을 테스트한다. 보통은, 개발자의 성향상 후자를 많이 선택한다.
근래에는 의존성 제거를 위해서 Mock 객체를 많이 사용한다.