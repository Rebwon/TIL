## 패턴 정리.

참조 : 엔터프라이즈 애플리케이션 아키텍처 패턴  

### 패턴 목록
- 2단계 뷰 : 도메인 데이터를 먼저 일종의 논리적 페이지로 변환한 다음 이를 다시 HTML로 변환하는 2단계 과정을 통해
변환한다.
- 값 객체 : 금액이나 날짜 범위와 같이 동등 개념이 식별자에 기반을 두지 않는 작고 간단한 객체.
- 게이트웨이 : 외부 시스템이나 자원에 대한 접근을 캡슐화하는 객체
- 계층 상위 형식 : 해당 계층에서 모든 형식의 상위 형식 역할을 하는 형식.
- 구현 테이블 상속 : 클래스의 상속 계층을 계층의 구현 클래스당 테이블 하나를 사용해 나타낸다.
- 굵은 입자 잠금 : 하나의 잠금으로 여러 관련 객체의 집합을 잠근다.
- 금액 : 금액을 나타낸다?
- 낙관적 오프라인 잠금 : 충돌이 감지되면 트랜잭션을 롤백해 동시 비즈니스 트랜잭션 간의 충돌을 방지한다.
- 단일 테이블 상속 : 여러 클래스로 이뤄진 상속 계층을 다양한 클래스의 모든 필드에 대한 열을 포함하는 단일 테이블로 나타낸다.
- 데이터 매퍼 : 객체와 데이터베이스 사이에서 둘 사이는 물론 매퍼 자체에 대한 독립성을 유지하면서 데이터를 옮기는 매퍼의 한 계층
- 데이터 전송 객체 : 메서드 호출 횟수를 줄이기 위해 프로세스 간에 데이터를 전송하는 객체
- 데이터베이스 세션 상태 : 세션 데이터를 데이터베이스에 커밋된 데이터로 저장한다.
- 도메인 모델 : 동작과 데이터를 모두 포함하는 도메인의 객체 모델
- 레지스트리 : 다른 객체가 공용 객체와 서비스를 찾기 위해 사용하는 잘 알려진 객체
- 레코드 집합 : 테이블 형식 데이터의 인메모리 표현
- 리포지토리 : 도메인 객체에 접근하는 컬렉션과 비슷한 인터페이스를 사용해 도메인과 데이터 매핑 계층 사이를 중재한다.
- 매퍼 : 독립적인 두 객체 간의 통신을 설정하는 객체
- 메타데이터 매핑 : 객체-관계형 매핑의 세부 정보를 메타데이터로 저장한다.
- 모델 뷰 컨트롤러 : 사용자 인터페이스 상호작용을 세 가지 독립적인 역할로 분할한다.
- 변환 뷰 : 도메인 데이터를 요소별로 변환하고 HTML 변환하는 뷰
- 분리 인터페이스 : 구현과 분리된 별도의 패키지에 인터페이스를 정의한다.
- 비관적 오프라인 잠금 : 한 시점에 한 트랜잭션만 데이터에 접근할 수 있게 해서 동시 비즈니스 트랜잭션 간의 충돌을 방지한다.
- 상속 매퍼 : 상속 계층을 처리하는 데이터베이스 매퍼를 구성하는 구조
- 서버 세션 상태 : 세션 상태를 직렬화된 형식으로 서버 시스템에 저장한다.
- 서비스 계층 : 사용 가능한 작업의 집합을 설정하고 각 작업에 대한 애플리케이션의 반응을 조율하는 서비스의 계층으로 애플리케이션의 경계를 정의한다.
- 서비스 스텁 : 테스트 중 문제가 될 수 있는 서비스에 대한 의존성을 제거한다.
- 식별자 맵 : 모든 객체를 한 맵에 로드해 각 객체가 한 번씩만 로드되게 한다. 객체를 참조할 때는 맵을 이용해 객체를 조회한다.
- 식별자 필드 : 인메모리 객체와 데이터베이스 행 간의 식별자를 유지 관리하기 위해 데이터베이스 ID 필드를 저장하는 객체.
- 암시적 잠금 : 프레임워크나 계층 상위 형식 코드에서 오프라인 잠금을 얻을 수 있게 한다. ex)Lock Manager
- 애플리케이션 컨트롤러 : 화면 이동과 애플리케이션의 흐름을 처리하는 중심 지점
- 연관 테이블 매핑 : 연관된 테이블에 대한 외래 키를 포함하는 테이블에 연관을 저장한다.
- 외래 키 매핑 : 객체 간 연결과 테이블 간 외래 키 참조의 매핑.
- 원격 파사드 : 가는 입자 객체에 굵은 입자 파사드를 제공해 네트워크 상에서 효율을 향상시킨다.
- 의존 매핑 : 클래스가 자식 클래스의 데이터베이스 매핑을 수행하게 한다.
- 작업 단위 : 비즈니스 트랜잭션의 영향을 받은 객체의 리스트를 유지 관리하고, 변경 내용을 기록하는 일과 동시성 문제를 해결하는 일을 조율한다.
- 지연 로드 : 필요한 데이터를 모두 포함하지는 않지만, 데이터가 필요할 때 가져오는 방법을 아는 객체
- 직렬화 LOB : 객체의 그래프를 데이터베이스 필드에 기록할 수 있는 하나의 큰 객체(LOB)로 직렬화해 저장한다.
- 쿼리 객체 : 데이터베이스 쿼리를 나타내는 객체.
- 클라이언트 세션 상태 : 세션 상태를 클라이언트에 저장한다.
- 클래스 테이블 상속 : 각 클래스당 테이블 하나를 사용해 클래스의 상속 계층을 나타낸다.
- 테이블 데이터 게이트웨이 : 데이터베이스 테이블에 대한 게이트웨이의 역할을 하는 객체. 한 인스턴스가 테이블의 모든 행을 처리한다.
- 테이블 모듈 : 데이터베이스 테이블이나 뷰의 모든 행에 대한 비즈니스 논리를 처리하는 단일 인스턴스.
- 템플릿 뷰 : HTML 페이지에 표시자를 삽입해 정보를 HTML로 렌더링한다.
- 트랜잭션 스크립트 : 비즈니스 논리를 프로시저별로 구성해 각 프로시저가 프레젠테이션의 단일 요청을 처리하게 한다.
- 특수 사례 : 특정 사례에 대해 특수한 동작을 제공하는 하위 클래스
- 페이지 컨트롤러 : 웹 사이트에서 특정 페이지나 동작에 대한 요청을 처리하는 객체.
- 포함 값 : 한 객체를 다른 객체의 테이블에 있는 여러 필드로 매핑한다.
- 프런트 컨트롤러 : 웹 사이트의 모든 요청을 처리하는 컨트롤러.
- 플러그인 : 컴파일이 아닌 구성 중에 클래스를 연결한다.
- 행 데이터 게이트웨이 : 데이터 원본의 단일 레코드에 대한 게이트웨이 역할을 하는 객체. 행마다 인스턴스 하나가 사용된다.
- 활성 레코드 : 데이터베이스 테이블이나 뷰의 행을 래핑하고, 데이터베이스 접근을 캡슐화하며, 해당 데이터에 대한 도메인 논리를 추가하는 객체.

### 패턴 요약

- 도메인 논리의 구조를 선택해야 한다.
  - 논리가 간단하다. -> 트랜잭션 스크립트
  - 논리가 복잡하다. -> 도메인 모델
  - 논리가 어느정도 복잡하고 레코드 집합과 관련된 좋은 도구를 사용할 수 있다. -> 테이블 모듈

- 도메인 논리에 고유한 API를 적용하려고 한다.
  - 서비스 계층
  
- 웹 프레젠테이션의 구조를 선택해야 한다.
  - 모델 뷰 컨트롤러
  
- HTTP 요청 처리를 체계화하려고 한다.
  - 애플리케이션의 흐름이 단순하고 아주 직접적인 페이지 URL을 사용한다. -> 페이지 컨트롤러
  - 애플리케이션에서 복잡한 흐름을 사용한다. -> 프런트 컨트롤러
  - 국제화와 유연한 보안 정책을 지원해야 한다. -> 프런트 컨트롤러

- 웹 페이지 포매팅을 제어하는 방법이 필요하다.
  - 페이지를 편집하고 동적 데이터에 대한 후크를 넣으려고 한다. -> 템플릿 뷰
  - 도메인 데이터(예:XML)를 변환해 페이지를 만들려고 한다. -> 변환 뷰
  - 사이트의 모양과 느낌을 전체적으로 변경하려고 한다. -> 2단계 뷰
  - 동일한 논리적 화면 포맷에 여러 외형을 적용하려고 한다. -> 2단계 뷰

- 복잡한 애플리케이션의 흐름 제어가 필요하다.
  - 애플리케이션 컨트롤러
  
- 데이터베이스와 상호작용하는 방법이 필요하다.
  - 트랜잭션 스크립트를 사용하고 있다. -> 행 데이터 게이트웨이
  - 트랜잭션 스크립트를 사용하고 있고 현재 플랫폼에 레코드 집합 지원 기능이 많다. -> 테이블 데이터 게이트웨이
  - 도메인 모델이 데이터베이스 테이블과 근접하게 대응된다. -> 활성 레코드
  - 리치 도메인 모델을 사용하고 있다. -> 데이터 매퍼
  
- 동일한 데이터베이스를 메모리 내의 각기 다른 위치에서 업데이트하지 않게 하려고 한다.
  - 식별자 맵
  
- 도메인 객체를 데이터베이스 레코드와 연결하려고 한다.
  - 식별자 필드
  
- 도메인 데이터와 데이터베이스를 매핑하는 코드를 최소화하려고 한다.
  - 메타데이터 매핑
  
- 도메인 모델을 기준으로 데이터베이스를 쿼리하려고 한다.
  - 쿼리 객체
  
- 객체 연관 관계를 데이터베이스에 저장하려고 한다.
  - 객체 연관 관계가 단일 참조 관계다. -> 외래 키 맵핑
  - 객체의 컬렉션이 있다. -> 외래 키 매핑
  - 객체 연관 관계가 다대다 관계다. -> 연관 테이블 매핑
  - 공유되지 않는 객체의 컬렉션이 있다. -> 의존 매핑
  - 값 객체인 필드가 있다. -> 포함 값
  - 데이터베이스의 다른 부분에서 사용되지 않는 복잡한 객체 연결체가 있다. -> 직렬화 LOB
  
- 전체 데이터베이스를 메모리에 로드하지 않고 작업하려고 한다.
  - 지연 로드
  
- 상속 구조를 관계형 데이터베이스에 저장하려고 한다.
  - 단일 테이블 상속
    - 데이터베이스 접근 시 단일 테이블이 병목 현상을 일으킨다. -> 클래스 테이블 상속
    - 데이터베이스에서 단일 테이블에 공간이 낭비된다. -> 클래스 테이블 상속
    - 조인이 너무 많아지지만 그래도 단일 테이블을 원하지 않는다. -> 구현 테이블 상속

- 읽거나 변경한 객체를 추적하려고 한다.
  - 작업 단위
  
- 단일 클라이언트 요청 안에서 데이터베이스로 변경 내용을 커밋하려고 한다.
  - 낙관적 오프라인 잠금(선점 잠금)
    - 사용자의 작업 손실을 방지해야 한다. -> 비관적 오프라인 잠금(비선점 잠금)

- 단일 잠금으로 연관된 객체의 집합을 잠그려고 한다.
  - 굵은 입자 잠금
  
- 잠금 전략에 허점이 생기지 않게 해야 한다.
  - 암시적 잠금

- 원격에 있는 가는 입자 객체에 접근해야 한다.
  - 원격 파사드
  
- 단일 원격 호출로 여러 객체에서 데이터를 전달해야 한다.
  - 데이터 전송 객체
  
- 상태 저장 트랜잭션 중간에 상태를 저장하려고 한다.
  - 저장하려는 상태 정보가 많지 않다. -> 클라이언트 세션 상태
  - 저장하려는 상태 정보가 많다. -> 서버 세션 상태
  - 진행 중인 작업을 데이터베이스로 커밋할 수 있다. -> 데이터베이스 세션 상태.